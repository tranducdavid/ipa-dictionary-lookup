"use strict";(self.webpackChunkipa_dictionary_lookup=self.webpackChunkipa_dictionary_lookup||[]).push([[483],{32483:function(n,e,t){t.r(e),t.d(e,{IpaLookup:function(){return X}});var r,i=t(29439),o=t(19860),a=t(9019),s=t(61113),c=t(57829),u=t(69099),l=t(47313),d=t(4942),f=t(1413),p=t(88564);!function(n){n.DESELECTED="deselected",n.REQUIRED="required",n.FORBIDDEN="forbidden"}(r||(r={}));var h=(0,p.ZP)(u.Z)((function(n){var e,t,r,i,o=n.selected,a=n.theme;return{minWidth:a.spacing(5),lineHeight:"1rem",textTransform:"none",color:null===(e=a.palette.selectionButtonColors)||void 0===e?void 0:e.text[o],backgroundColor:null===(t=a.palette.selectionButtonColors)||void 0===t?void 0:t.background[o],border:"solid 1px ".concat(null===(r=a.palette.selectionButtonColors)||void 0===r?void 0:r.borderColor),margin:"1px",padding:"6px","&:hover":{backgroundColor:null===(i=a.palette.selectionButtonColors)||void 0===i?void 0:i.background.hover[o]}}})),x=t(46417);function v(n){var e=n.label,t=n.symbols,i=n.state,a=n.setState,u=(0,o.Z)(),l=function(n,e,t){return function(){t((0,f.Z)((0,f.Z)({},e),{},(0,d.Z)({},n,function(n){var e=Object.values(r);return e[(e.indexOf(n)+1)%e.length]}(e[n]))))}};return(0,x.jsxs)(c.Z,{mb:u.spacing(2),children:[e&&(0,x.jsx)(s.Z,{children:e}),t.map((function(n){return(0,x.jsx)(h,{variant:"contained",selected:i[n],onClick:l(n,i,a),children:n},n)}))]})}function g(n){return n.reduce((function(n,e){return n[e]=r.DESELECTED,n}),{})}var m=t(60251),Z=t(85281);function j(n){var e=n.open;return(0,x.jsx)(m.Z,{sx:{position:"absolute",color:"#fff",zIndex:function(n){return n.zIndex.drawer+1}},open:e,children:(0,x.jsx)(Z.Z,{color:"inherit"})})}var b=t(15861),y=t(87757),S=t.n(y),E=t(59862);var C=function(n){return E.codec.hex.fromBits(E.hash.sha256.hash(n))};var k=t(40056);function D(n){return n.split("\n").map((function(n){var e=n.split("\t");return{spelling:e[0],pronunciation:e[1].split(", ")}}))}var _=t(66835),P=t(57861),O=t(67478),R=t(51629),I=t(23477),T=t(24076),w=t(82295),B=t(42461),U=t(37771),q=t(97456),F=t(77834);function N(n){var e=n.data,t=(0,o.Z)(),r=(0,l.useState)(0),a=(0,i.Z)(r,2),s=a[0],c=a[1],u=(0,l.useState)(10),d=(0,i.Z)(u,2),f=d[0],p=d[1],h=(0,l.useState)(""),v=(0,i.Z)(h,2),g=v[0],m=v[1],Z=(0,l.useCallback)(function(n){var e,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];clearTimeout(e),e=setTimeout((function(){e=null,n.apply(void 0,i)}),t)}}((function(n){return m(n)})),[m]),j=(0,l.useMemo)((function(){return""!==g?e.filter((function(n){return n.pronunciation.includes(g)||n.spelling.includes(g)})):e}),[e,g]);return(0,x.jsx)(R.Z,{component:w.Z,children:(0,x.jsxs)(_.Z,{size:"small",children:[(0,x.jsx)(I.Z,{children:(0,x.jsxs)(T.Z,{sx:{bgcolor:t.palette.primary.main},children:[(0,x.jsx)(W,{children:"Spelling"}),(0,x.jsx)(W,{children:"Phonetic"})]})}),(0,x.jsxs)(P.Z,{children:[(0,x.jsx)(T.Z,{children:(0,x.jsx)(O.Z,{sx:{paddingTop:0,paddingBottom:0},colSpan:2,children:(0,x.jsx)(B.Z,{sx:{height:33,fontSize:"0.875rem"},placeholder:"search",fullWidth:!0,disableUnderline:!0,onChange:function(n){Z(n.target.value)}})})},"i:search"),(f>0?j.slice(s*f,s*f+f):j).map((function(n){return(0,x.jsxs)(T.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,x.jsx)(O.Z,{children:n.spelling}),(0,x.jsx)(O.Z,{children:n.pronunciation.join(", ")})]},n.spelling)}))]}),(0,x.jsx)(U.Z,{children:(0,x.jsx)(T.Z,{children:(0,x.jsx)(q.Z,{rowsPerPageOptions:[10,15,20,25,100],colSpan:2,count:j.length,rowsPerPage:f,page:s,SelectProps:{native:!0},onPageChange:function(n,e){c(e)},onRowsPerPageChange:function(n){p(parseInt(n.target.value,10)),c(0)},ActionsComponent:F.Z})})})]})})}var W=(0,p.ZP)(O.Z)((function(n){var e=n.theme;return{color:e.palette.primary.contrastText,fontWeight:e.typography.fontWeightBold}})),z=function(n){var e=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return C(JSON.stringify(e))},t={};return function(){var r=e.apply(void 0,arguments);if(null==t[r]){var i=n.apply(void 0,arguments);return t[r]=i,i}return t[r]}}((function(e){return n.filter((function(n){var t=e.letters.required.every((function(e){return n.spelling.includes(e)})),r=e.ipaSymbols.required.every((function(e){return n.pronunciation.some((function(n){return n.includes(e)}))})),i=e.letters.forbidden.every((function(e){return!n.spelling.includes(e)})),o=e.ipaSymbols.forbidden.every((function(e){return n.pronunciation.some((function(n){return!n.includes(e)}))}));return t&&r&&i&&o}))}),(function(n){var e=n.letters.required.join(""),t=n.letters.forbidden.join(""),r=n.ipaSymbols.required.join(""),i=n.ipaSymbols.forbidden.join("");return"searchFullDictionary/rl:".concat(e,";bl:").concat(t,";rp:").concat(r,";bp").concat(i)}));return{search:e}},L=function(){var n=null;return{get:function(){return n},create:function(e){return null==e?null:null!=n?n:n=z(e)}}}(),A=t(21991),M=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],H=["b","d","d\u0292","\xf0","f","\u0261","h","j","k","\u026b","m","n","\u014b","p","\u0279","s","\u0283","t","t\u0283","\u03b8","v","w","z","\u0292"],Q=["\u0251","\xe6","\u025b","\u025d","\u0254","\u0259","\u026a","\u028a","i","u"],K=["a\u026a","a\u028a","\u0254\u026a","e\u026a","o\u028a"],J=[H,Q,K].flat(),V=function(n){return(0,l.useState)(g(n))},G=function(n,e){return Object.entries(n).filter((function(n){var t=(0,i.Z)(n,2);t[0];return t[1]===e})).map((function(n){var e=(0,i.Z)(n,2),t=e[0];e[1];return t}))};function X(){var n=(0,k.useQuery)("dictionaryData",(0,b.Z)(S().mark((function n(){var e,t,r;return S().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("".concat("/ipa-dictionary-lookup","/dictionary_en_US.sha256"));case 2:return n.next=4,n.sent.text();case 4:if(e=n.sent,!(t=localStorage.getItem("dictionary_en_US"))){n.next=10;break}if(C(t)!==e){n.next=10;break}return n.abrupt("return",D(t));case 10:return n.next=12,fetch("".concat("/ipa-dictionary-lookup","/dictionary_en_US.txt"));case 12:return n.next=14,n.sent.text();case 14:return r=n.sent,localStorage.setItem("dictionary_en_US",r),n.abrupt("return",D(r));case 17:case"end":return n.stop()}}),n)})))),e=n.data,t="success"!==n.status,d=(0,o.Z)(),f=V(M),p=(0,i.Z)(f,2),h=p[0],m=p[1],Z=V(J),y=(0,i.Z)(Z,2),E=y[0],_=y[1],P=(0,l.useMemo)((function(){return{letters:{required:G(h,r.REQUIRED),forbidden:G(h,r.FORBIDDEN)},ipaSymbols:{required:G(E,r.REQUIRED),forbidden:G(E,r.FORBIDDEN)}}}),[h,E]),O=(0,l.useMemo)((function(){return null!=e?L.create(e):null}),[e]),R=(0,l.useMemo)((function(){return null===O||void 0===O?void 0:O.search(P)}),[O,P]);return(0,x.jsxs)(x.Fragment,{children:["V2",JSON.stringify({NODE_ENV:"production",PUBLIC_URL:"/ipa-dictionary-lookup",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}),(0,x.jsx)(j,{open:t}),(0,x.jsxs)(a.ZP,{container:!0,children:[(0,x.jsxs)(a.ZP,{item:!0,xs:12,md:6,children:[(0,x.jsx)(s.Z,{variant:"h6",children:"Letters"}),(0,x.jsx)(v,{symbols:M,state:h,setState:m}),(0,x.jsx)(s.Z,{variant:"h6",children:"Phonemes"}),(0,x.jsx)(v,{label:"Consonants",symbols:H,state:E,setState:_}),(0,x.jsxs)(a.ZP,{container:!0,flexDirection:"row",children:[(0,x.jsx)(c.Z,{mr:d.spacing(2),children:(0,x.jsx)(v,{label:"Monophthongs",symbols:Q,state:E,setState:_})}),(0,x.jsx)(v,{label:"Diphthongs",symbols:K,state:E,setState:_})]}),(0,x.jsx)(u.Z,{variant:"contained",endIcon:(0,x.jsx)(A.Z,{}),onClick:function(){m(g(M)),_(g(J))},children:"Reset"})]}),(0,x.jsxs)(a.ZP,{item:!0,xs:12,md:6,children:[(0,x.jsx)(s.Z,{variant:"h6",children:"Dictionary"}),(0,x.jsx)(c.Z,{sx:{position:"relative"},children:(0,x.jsx)(N,{data:null!==R&&void 0!==R?R:[]})})]})]})]})}}}]);